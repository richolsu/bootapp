<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}">
<body>
  <div class="container"  layout:fragment="content">  

    <ul class="breadcrumb">
      <li class="active"><i class="fa fa-dashboard"></i> 首页</li>
    </ul>
    <div class="row" id="dashboard">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" >
        <div class="panel panel-default">
          <div class="panel-heading">
            <label>采购动态</label>
            <!-- <div class="pull-right"><a th:href="@{/notice}">更多></a></div> -->
          </div>
          <div class="panel-body" >
            <p th:each="notice : ${noticeList}">                    
              <span th:classappend="!${notice.verify_date}?new" th:text="|${#dates.format(notice.verify_date, 'yyyy-MM-dd HH:mm:ss')} [${notice.class_name}]|">aaa</span>
              <a class="notice" th:data-target="${notice.id}" href="#" th:classappend="!${notice.verify_date}?new" th:utext="${notice.title}">2018-6-11 9:29:09 采购管理平台</a>
            </p>
          </div>
        </div>
      </div>
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" sec:authorize="hasRole('ROLE_BUYER') or hasRole('ROLE_VENDOR')">
        <div class="panel panel-default">
          <div class="panel-heading">
            <label>系统消息</label>
            <!-- <div class="pull-right"><a th:href="@{/message}">更多></a></div>-->
          </div>
          <div class="panel-body">
            <p th:each="notice : ${messageList}">
	            <span th:classappend="!${notice.read_date}?new" th:text="|${#dates.format(notice.create_date, 'yyyy-MM-dd HH:mm:ss')} |">aaa</span>
	            <a class="notice" th:classappend="!${notice.read_date}?new" th:href="@{|${notice.url}/${notice.id}|}" th:utext="${notice.title}">2018-6-11 9:29:09 采购管理平台</a>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="notice_dialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">采购动态</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body" id="notice_body">	
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">确认</button>
					</div>
				</div>
			</div>
		</div>
  
  </div>
</body>
<!-- END BODY -->
</html>
<script th:inline="javascript">
var view_url = /*[[@{/notice/}]]*/'';
var notice_data;

jQuery(document).ready(function() {  
	$(".notice").click(function() {
		var id = $(this).attr("data-target");	
		var url = id + "/notice";
		$.get(url,function(data) {	
			notice_data = data;
			$("#notice_body").html(data);
		  $("#notice_dialog").modal("show");
		});
	});
});
</script>
  