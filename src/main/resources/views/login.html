<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!-- Head BEGIN -->
<head>
  <meta charset="utf-8">
  <title>供应商管理平台</title>

  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
  <link rel="shortcut icon" th:href="@{/assets/favicon-128.png}">

  <!-- Fonts START -->
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|PT+Sans+Narrow|Source+Sans+Pro:200,300,400,600,700,900&amp;subset=all" rel="stylesheet" type="text/css">
  <!-- Fonts END -->

  <!-- Global styles START -->          
  <link href="assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link th:href="@{/assets/plugins/sweetalert/sweetalert2.min.css}" rel="stylesheet" type="text/css">
  <!-- Global styles END --> 
   
  <!-- Page level plugin styles START -->
  <link href="assets/pages/css/animate.css" rel="stylesheet">
  <!-- Page level plugin styles END -->

  <!-- Theme styles START -->
  <link href="assets/corporate/css/style.css" rel="stylesheet">
  <link href="assets/corporate/css/style-responsive.css" rel="stylesheet">
  <link th:href="@{/assets/corporate/css/custom.css}" rel="stylesheet">
  <!-- Theme styles END -->
</head>
<!-- Head END -->

<!-- Body BEGIN -->
<body class="corporate">
    <div class="header" style="margin-bottom: 0px;">
        <div class="container">
            <a class="site-logo" href="index.html"><img src="assets/corporate/img/logo.png" alt="采购管理平台"></a>
        </div>
    </div>
    <div class="main bg-login">
      <div class="pull-right">
          <div class="login-content">
              <div class="login-form" id="login-page">
                  <form id="login_form" action="#" method="post" th:action="@{/login}">
                      <div class="form-group">
                          <input type="text" name="username" class="form-control" placeholder="用户名" autofocus>
                      </div>
                      <div class="form-group">
                          <input type="password" name="password" class="form-control" placeholder="密码">
                      </div>
                      <div class="form-group" th:if="${param.error}">
                          <span class="error">用户名或密码错误！请输入有效的用户名和密码。</span>
                      </div>
                      <div class="form-group" th:if="${param.resetSuccess}">
                          <span class="error">密码重置成功！请用新密码登陆。</span>
                      </div>
                      <div class="form-group">
                          <label>
                              <input type="checkbox" name="remember-me"> 记住密码
                          </label>
                          <a class="pull-right" id="btn_forget">密码找回</a>
                      </div>
                      <div class="form-group">
                        <button type="submit" class="btn btn-primary btn-flat m-b-30 m-t-30 form-control">登  录</button>
                      </div>
                      <div class="form-group text-center">
                          <p>有情提醒：推荐使用谷歌浏览器！</p>
                      </div>
                  </form>
              </div>

              <div class="login-form" id="forget-page" style="display:none">
                    <div class="form-group text-center">
                        <p>请输入账号邮箱，申请重置密码。</p>
                    </div>
                    <form id="mail_form" th:action="@{/resetpassword}" method="post">
                        <div class="form-group">
                            <div class="input-icon input-icon-lg">
                                <i class="fa fa-envelope"></i>
                                <input type="email" name="email" id="email" class="form-control" placeholder="email@163.com">
                            </div>
                        </div>
                        <div class="form-inline">
                            <a id="btn_back" class="btn btn-success form-control">返回登陆</a>
                            <a id="btn_apply" class="btn btn-primary form-control" style="float:right">提交申请</a>
                        </div>
                    </form>
                </div>
          </div>
      </div>
    </div>
    <div class="footer">
        <div class="container">
            <div class="row">
                <label class="powered col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">由<a href="http://www.cnyunl.com">云链</a>信息提供技术支持</label>
            </div>
        </div>
    </div>

    <script src="assets/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="assets/plugins/jquery-migrate.min.js" type="text/javascript"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>      
    <script src="assets/corporate/scripts/back-to-top.js" type="text/javascript"></script>
    <!-- END CORE PLUGINS -->

    <!-- BEGIN PAGE LEVEL JAVASCRIPTS (REQUIRED ONLY FOR CURRENT PAGE) -->
    <script th:src="@{/assets/plugins/sweetalert/sweetalert2.min.js}" type="text/javascript" ></script>
    <script th:src="@{/assets/plugins/jquery.form.min.js}" type="text/javascript"></script>
    <script th:src="@{/assets/plugins/jquery-validate/jquery.validate.js}" type="text/javascript" ></script>
    <script src="assets/pages/scripts/bs-carousel.js" type="text/javascript"></script>

    <!-- END PAGE LEVEL JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>

<script>
$(document).ready(function() {
  jQuery.extend(jQuery.validator.messages, {
    required: "不能为空",
    email: "无效的邮箱格式",
  });
  
  
  $("#btn_forget").click(function() {
    $("#login-page").hide();
    $("#forget-page").show();
  });
  $("#btn_back").click(function() {
    $("#login-page").show();
    $("#forget-page").hide();
  });
  
  $("#login_form" ).validate({
    // define validation rules
    rules: {
      username: {
        required: true
      },    
      password: {
        required: true
      },    
    },
    
    submitHandler: function (form) {
      form.submit();
    }
  }); 
  
  $("#mail_form" ).validate({
    // define validation rules
    rules: {
      email: {
        email: true,
        required: true
      },    
    },
    
    submitHandler: function (form) {
      jQuery(form).ajaxSubmit({
        success: function(res, status, xhr, form) {
          if (res == "1") {
            swal({
              "title": "操作成功",
              "type": "success"
            });
            
            $("#btn_back").trigger("click");
            
          }else{
            swal({
              "title": "无效邮箱",
              "type": "error"
            });
            
          }
        },
        error: function (res, status, xhr, form) {
          swal({
            "title": "操作失败",
            "type": "error"
          });
        }
      });
    }
  }); 
  
  $("#btn_apply").click(function() {
    $('#mail_form').submit();
  });
});
  
</script>