<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}">
<body>
  <div class="container"  layout:fragment="content">  
      <ul class="breadcrumb">
        <li>
          <a th:href="@{/}"><i class="fa fa-dashboard"></i> 首页</a>
        </li>
        <li class="active">出货看板</li>
      </ul>
      <div class="text-right" style="margin-top: 10px; margin-bottom: 5px;">
        <a class="btn btn-primary"> 导出</a>
      </div>

      <div class="row">
        <div class="col-lg-12">
            <table id="example" class="table table-striped table-bordered nowrap table-striped table-hover" style="width:100%">
            </table>
        </div>
      </div>
  </div>  
</body>
</html>


<script th:inline="javascript">

	$(document).ready(function() {
		var table = $('#example').DataTable({
			ajax : {
				url : /*[[@{/api/venpriceadjust/batch_get}]]*/'',
				data : function(data) {
					var filter = {
						rows_per_page : data.length,
						page_index : data.start / data.length + 1
					}
					return filter;
				},
				dataSrc : function(json) {
					if (json.errcode != 0) {
						alert(json.errmsg);
						json.recordsTotal = 0
						json.recordsFiltered = 0;
						json.venpriceadjustlist = [];
					} else {
						json.recordsTotal = json.row_count;
						json.recordsFiltered = json.row_count;
					}
					return json.venpriceadjustlist;
				},
			},

			columns : [ {
				data : 'ccode',
				title : '单据号',
				defaultContent : ''
			}, {
				data : 'ddate',
				title : '调价日期',
				render: $.fn.date_renderer,
				defaultContent : ''
			}, {
				data : 'cdepname',
				title : '调价部门',
				defaultContent : ''
			}, {
				data : 'cpersonname',
				title : '调价业务员',
				defaultContent : ''
			}, {
				data : 'btaxcost',
				title : '价格标识',
				defaultContent : ''
			}, {
				data : 'isupplytype',
				title : '供应类型',
				defaultContent : ''
			}, {
				data : 'cmainmemo',
				title : '表头备注',
				defaultContent : ''
			}, {
				data : 'cmaker',
				title : '制单人',
				defaultContent : ''
			}, {
				data : 'cverifier',
				title : '审批人',
				defaultContent : ''
			}, {
				data : 'dverifydate',
				title : '审批日期',
				render: $.fn.date_renderer,
				defaultContent : ''
					
			} ],
		});

		$("#btn_search").click(function() {
			table.draw();
		});
    
    $('#product_name').keyup(function(e){
        if(e.keyCode == 13)
        	table.draw();
    });
	});
</script>