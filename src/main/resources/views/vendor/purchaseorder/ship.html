<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}">
<body>
  <div class="container"  layout:fragment="content">  
      <ul class="breadcrumb">
        <li>
          <a th:href="@{/}"><i class="fa fa-dashboard"></i> 首页</a>
        </li>
        <li>订单管理</li>
        <li class="active">订单发货</li>
      </ul>
      <div class="search-content">
          <div class="search-cell width-10">
            <label for="code">订单号码：</label>
            <input type="text" id="code" class="form-control">
          </div>
          <div class="search-cell width-10">
            <label for="inventory">商品编码/名称：</label>
            <input type="text" id="inventory" class="form-control">
          </div>
          <div class="search-cell width-10">
            <label for="arrive_date">需求日期: </label>
            <input type="text" id="arrive_date" value="" class="form-control" />
          </div>
          <div class="search-cell width-10">
            <label for="confirm_date">承诺日期</label>
            <input type="text" id="confirm_date" value="" class="form-control" />
          </div>
          <div style="vertical-align: bottom" class="search-cell width-15">
            <button class="btn btn-default" id="btn_search"><i class="fa fa-search"></i> 查询</button>
          </div>
      </div>
      <div class="row">
        <div class="col-lg-12">
            <table id="example" class="table table-striped table-bordered nowrap table-striped table-hover" style="width:100%">
                <tbody><tr><td>　</td></tr></tbody>
            </table>
        </div>
      </div>
  </div>  
</body>
</html>


<script th:inline="javascript">
	
	$(document).ready(function() {
        $('#arrive_date').datepicker();
        $('#confirm_date').datepicker();
    
		var table = $('#example').DataTable({
		    ordering : true,
			ajax : {
				url : /*[[@{/vendor/purchaseorder/ship/list}]]*/'',
				data : function(data) {
                  var filter = {
                    order : data.columns[data.order[0].column].data,
                    dir : data.order[0].dir,
                    rows_per_page : data.length,
                    page_index : data.start / data.length + 1,
                    inventory : $('#inventory').val(),
                    code : $('#code').val(),
                    confirm_date : $('#confirm_date').val(),
                    arrive_date : $('#arrive_date').val()
                  }
                  return filter;
				},
				dataSrc : function(json) {
				  json.recordsTotal = json.totalElements;
                  json.recordsFiltered = json.totalElements;
                  return json.content;
				},				
			},
			
			columns : [ {
              data : 'code',
              title : '订单编号',
            }, {
              data : 'inventoryname',
              title : '商品名称',
            }, {
              data : 'specs',
              title : '商品描述',
            }, {
              data : 'unitname',
              title : '单位',
            }, {
              data : 'quantity',
              title : '数量',
			}, {
              data : 'arrivedate',
              title : '需求日期',
              render: $.fn.date_renderer,
            }, {
              data : 'arrivenote',
              title : '供应方备注',
            }, {
              data : 'confirmdate',
              title : '承诺交货日期',
              render: $.fn.date_renderer,
            }, {
              data : 'confirmnote',
              title : '交货方备注',
			} ],
		});
		
    $("#btn_search").click(function() {
    	table.draw();
    });
    
    $('#code, #inventory, #arrive_date, #confirm_date').keyup(function(e) {
      if (e.keyCode == 13)
        table.draw();
    });
	});
</script>