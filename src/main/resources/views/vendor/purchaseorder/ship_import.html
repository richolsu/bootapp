<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}">
<body>
  <div class="container"  layout:fragment="content">  
      <div class="container">
        <ul class="breadcrumb">
          <li>
            <a th:href="@{/}"><i class="fa fa-dashboard"></i> 首页</a>
          </li>
          <li><a>订单管理</a></li>
          <li><a th:href="@{/vendor/purchaseorder/ship}">订单发货</a></li>
          <li class="active">导入送货单</li>
        </ul>
        <div class="text-right" style="margin-top: 10px; margin-bottom: 5px;">
          <a class="btn btn-primary" th:href="@{/vendor/purchaseorder/ship}"> 返回</a>
          <a class="btn btn-primary"> 导入数据</a>
          <a class="btn btn-primary"> 校验</a>
        </div>

        <div class="row">
          <div class="col-lg-12">
              <table id="example" class="table table-striped table-bordered nowrap table-striped table-hover" style="width:100%">     
                <tbody><tr><td>　</td></tr></tbody>             
              </table>
          </div>
        </div>
    </div>
  </div>  
</body>
</html>


<script th:inline="javascript">
	
	$(document).ready(function() {
		var table = $('#example').DataTable({
			ajax : {
				url : /*[[@{/api/purchaseorder/batch_get}]]*/'',
				data : function(data) {
					var filter = {
						rows_per_page: data.length,
						page_index:data.start/data.length+1,
						name:$('#product_name').val()
					}
					return filter;
				},
				dataSrc : function(json) {
					if (json.errcode != 0) {
						alert(json.errmsg);
						json.recordsTotal = 0
						json.recordsFiltered = 0;
						json.purchaseorderlist = [];
					}else{
						json.recordsTotal = json.row_count;
						json.recordsFiltered = json.row_count;
					}
					return json.purchaseorderlist;
				},				
			},
			
			columns : [ {
                data : null,
                title : '',
                render: function(data, display, record) {
                    return '<input type="checkbox" id="' + record.ccode + '"/>';
                },
                defaultContent : '1'
            }, {
                data : null,
                title : '序号',
                defaultContent : '1'
            }, {
                data : null,
                title : '供应商编码',
                defaultContent : '02002021202020'
            }, {
                data : null,
                title : '供应商名称',
                defaultContent : '供应商名称'
            }, {
                data : null,
                title : '订单号',
                defaultContent : '20180615122521'
            }, {
                data : null,
                title : '订单行号',
                defaultContent : '1'
            }, {
                data : null,
                title : '商品编码',
                defaultContent : '002010'
            }, {
                data : null,
                title : '商品名称',
                defaultContent : '商品名称'
            }, {
                data : null,
                title : '单位',
                defaultContent : '片'
            }, {
                data : 'cverifier',
                title : '需求日期',
                render: $.fn.date_renderer,
                defaultContent : ''
            }, {
                data : null,
                title : '订单数量',             
                defaultContent : '6'
            }, {
                data : null,
                title : '订单已送货数量',
                defaultContent : '4'
            }, {
                data : null,
                title : '本次送货数量',
                defaultContent : '5'                
            } ],
		});
		
    $("#btn_search").click(function() {
    	table.draw();
    });
    
    $('#product_name').keyup(function(e){
        if(e.keyCode == 13)
        	table.draw();
    });
	});
</script>