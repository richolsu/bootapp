<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}">
<body>
	<div class="container" layout:fragment="content">
		<ul class="breadcrumb">
			<li><a th:href="@{/}"><i class="fa fa-dashboard"></i> 首页</a></li>
			<li><a href="#">基础资料</a></li>
			<li class="active">供应商管理</li>
		</ul>
		<div class="search-content">
			<div class="search-cell width-10">
				<label for="vendor_class">供应商分类名称/编码:</label> 
				<input type="text" id="vendor_class" class="form-control"> 
			</div>
			<div class="search-cell width-10">
				<label for="vendor">供应商名称/编码:</label> 
				<input type="text" id="vendor" class="form-control"> 
			</div>
			<div style="vertical-align: bottom" class="search-cell width-15">
        <a class="btn btn-default" id="btn_search"><i class="fa fa-search"></i> 查询</a>
      </div>
			
		</div>
		<div class="row">
			<div class="col-lg-12">
				<table id="example" class="table table-striped table-bordered nowrap table-striped table-hover" style="width: 100%">
				</table>
			</div>
		</div>
	</div>
</body>
</html>
<script th:inline="javascript">
  $(document).ready(function() {
	  var table_options = {
	    ordering : true,
	    ajax : {
	      url : /*[[@{/vendor/list}]]*/'',
	      data : function(data) {
		      var filter = {
		        rows_per_page : data.length,
		        page_index : data.start / data.length + 1,
		        order : data.columns[data.order[0].column].data,
		        dir : data.order[0].dir,
		        vendor : $('#vendor').val(),
		        vendor_class : $('#vendor_class').val()
		      }
		      return filter;
	      },
	      dataSrc : function(json) {
		      json.recordsTotal = json.totalElements;
		      json.recordsFiltered = json.totalElements;
		      return json.content;
	      },
	    },
	    scrollY : '355px',
	    fixedColumns: {
        leftColumns: 3,
    	},
	    order: [ [2, 'asc'] ],
	    columns : [ {
	      data : 'vendorClass.code',
	      title : '供应商分类',
	      render : function(data, display, record) {		      
		      return record.vendorClass.code + " " + record.vendorClass.name;
	      },
	    }, {
	      data : 'code',
	      title : '供应商编码',
	      render : function(data, display, record) {
		      var edit_url = /*[[@{/vendor/}]]*/'';
		      edit_url += data + '/edit';
		      return '<a href="' + edit_url + '">' + data + '</a>';
	      },
	      defaultContent : ''
	    }, {
	      data : 'name',
	      title : '供应商名称',
	    }, {
	      data : 'abbrname',
	      title : '供应商简称',
	    }, {
	      data : 'address',
	      title : '地址',
	    }, {
	      data : 'bank_open',
	      title : '开户银行',
	    }, {
	      data : 'bank_acc_number',
	      title : '银行帐号',
	    }, {
	      data : 'fax',
	      title : '传真 ',
	    }, {
	      data : 'email',
	      title : 'Email地址',
	    }, {
	      data : 'contact',
	      className : 'dt-right',
	      title : '联系人',
	    }, {
	      data : 'mobile',
	      className : 'dt-right',
	      title : '手机',
	    }, {
	      data : 'receive_site',
	      title : '到货地址',
	    } ],
	  };

	  var table = $('#example').DataTable(table_options);
	  $("#btn_search").click(function() {
		  table.draw();
	  });

	  $('#vendor, #vendor_class').keyup(function(e) {
		  if (e.keyCode == 13)
			  table.draw();
	  });
  });
</script>