<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}">
<body>
  <div class="container"  layout:fragment="content">  
      <ul class="breadcrumb">
        <li>
          <a href="index.html"><i class="fa fa-dashboard"></i> 首页</a>
        </li>
        <li><a href="order_index.html">订单管理</a></li>
        <li class="active">采购订单明细</li>
      </ul>

      <div class="text-right" style="margin-top: 10px; margin-bottom: 5px;">
          <a class="btn btn-primary"> 退回</a>
          <a class="btn btn-primary"> 发布</a>
          <a class="btn btn-primary"> 打印</a>
      </div>

      <div class="row">
          <div class="col-lg-2 col-md-2">
            <label>订单号: </label>
            <input type="text" class="form-control" value="4502691503" readonly/>
          </div>
          <div class="col-lg-2 col-md-2">
            <label>币别: </label>
            <input type="text" class="form-control" value="CNY" readonly/>
          </div>
          <div class="col-lg-2 col-md-2">
            <label>订单类型: </label>
            <input type="text" class="form-control" value="标准采购订单" readonly/>
          </div>
          <div class="col-lg-2 col-md-2">
            <label>版本: </label>
            <input type="text" class="form-control" value="2" readonly/>
          </div>
          <div class="col-lg-2 col-md-2">
            <label>数据来源: </label>
            <input type="text" class="form-control" value="ERP" readonly/>
          </div>

          <div class="col-lg-4 col-md-4">
            <label>客户: </label>
            <input type="text" class="form-control" value="浙江美尔凯特集成吊顶有限公司" readonly/>
          </div>
          <div class="col-lg-4 col-md-4">
            <label>供应商: </label>
            <input type="text" class="form-control" value="嘉兴市华年电机有限公司" readonly/>
          </div>
          <div class="col-lg-4 col-md-4">
            <label>供应商地址: </label>
            <input type="text" class="form-control" value="XXXXXXXXXXXXXXX" readonly/>
          </div>

          <div class="col-lg-4 col-md-4">
            <label>订单总金额: </label>
            <input type="text" class="form-control" value="XXXXX.XX" readonly/>
          </div>
          <div class="col-lg-4 col-md-4">
            <label>创建日期: </label>
            <input type="text" class="form-control" value="xxxx-xx-xx xx:xx:xx" readonly/>
          </div>
          <div class="col-lg-4 col-md-4">
            <label>发布日期: </label>
            <input type="text" class="form-control" value="xxxx-xx-xx xx:xx:xx" readonly/>
          </div>

          <div class="col-lg-12 col-md-12">
            <label>订单摘要: </label>
            <input type="text" class="form-control" value="" readonly/>
          </div>
          
          <div class="col-lg-4 col-md-4">
            <label>付款条件: </label>
            <input type="text" class="form-control" value="XXXXX.XX" readonly/>
          </div>
          <div class="col-lg-4 col-md-4">
            <label>预付金额: </label>
            <input type="text" class="form-control" value="23000" readonly/>
          </div>
          <div class="col-lg-12 col-md-12 text-right">
            <a class="btn btn-default">基本信息</a>
            <a class="btn btn-default">预付款信息</a>
          </div>

      </div>
      <div class="row">
        <div class="col-lg-12">
            <table id="example" class="ui celled table nowrap" style="width:100%">                
            </table>
        </div>
      </div>
  </div>  
</body>
</html>


<script th:inline="javascript">
	
	$(document).ready(function() {
		var table = $('#example').DataTable({
			ajax : {
				url : /*[[@{/api/purchaseorder/batch_get}]]*/'',
				data : function(data) {
					var filter = {
						rows_per_page: data.length,
						page_index:data.start/data.length+1,
						name:$('#product_name').val()
					}
					return filter;
				},
				dataSrc : function(json) {
					if (json.errcode != 0) {
						alert(json.errmsg);
						json.recordsTotal = 0
						json.recordsFiltered = 0;
						json.purchaseorderlist = [];
					}else{
						json.recordsTotal = json.row_count;
						json.recordsFiltered = json.row_count;
					}
					return json.purchaseorderlist;
				},				
			},
			
			columns : [ {
				data : 'code',
				title : '订单编号',
				defaultContent : ''
			}, {
				data : 'date',
				title : '订单日期',
				render: $.fn.date_renderer,
				defaultContent : ''
			}, {
				data : 'operation_type_code',
				title : '采购业务类型',
				defaultContent : ''
			}, {
				data : 'state',
				title : '订单状态',
				defaultContent : ''
			}, {
				data : 'purchase_type_code',
				title : '采购类型编码',
				defaultContent : ''
			}, {
				data : 'purchase_type_name',
				title : '采购类型',
				defaultContent : ''
			}, {
				data : 'vendorcode',
				title : '供应商编码',
				defaultContent : ''
			}, {
				data : 'vendorname',
				title : '供应商名称',
				defaultContent : ''
			}, {
				data : 'vendorabbname',
				title : '供应商简称',
				defaultContent : ''
			}, {
				data : 'deptcode',
				title : '部门编码',
				defaultContent : ''
			}, {
				data : 'deptcode',
				title : '部门编码',
				defaultContent : ''
			}, {
				data : 'deptname',
				title : '部门名称',
				defaultContent : ''
			}, {
				data : 'personcode',
				title : '业务员编码',
				defaultContent : ''
			}, {
				data : 'personname',
				title : '业务员',
				defaultContent : ''
			}, {
				data : 'remark',
				title : '备注',
				defaultContent : ''
			}, {
				data : 'currency_name',
				title : '外币名称',
				defaultContent : ''
			}, {
				data : 'currency_rate',
				title : '汇率',
				defaultContent : ''
			}, {
				data : 'maker',
				title : '制单人',
				defaultContent : ''
			}, {
				data : 'verifier',
				title : '审核人',
				defaultContent : ''
			}, {
				data : 'closer',
				title : '关闭人',
				defaultContent : ''
			}, {
				data : 'sum',
				title : '原币价税合计',
				defaultContent : ''
			} ],
		});
		
    $("#btn_search").click(function() {
    	table.draw();
    });
    
    $('#product_name').keyup(function(e){
        if(e.keyCode == 13)
        	table.draw();
    });
	});
</script>